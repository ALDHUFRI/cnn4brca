%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Written by: Erick Cobos Tandazo (a01184587@itesm.mx)
% Date: 24-June-2014
%
% Master's thesis main document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[11pt]{article}

\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{verbatim}
\usepackage{graphicx}

\begin{document}
	\part{Methods}
	\section{Operationalization}
	We document here how we tranform/reduce the breast cancer detection and diagnosis task into a machine learning task able to be taken by convolutional networks, i.e., how we produce a data set with $m$ inputs $x^{(i)} \in \mathbb{R}^n$ and $m$ corresponding labels $y^{(i)}$. We use this notation throughout this section. 

	\subsection{Database}
	\input{database}

	\subsection{BCDR-DM}
	Files and how are they organized. Data available per case and per mammogram. How are boundaries written. formats, etc.
	159 calcifications, 36 micro, 11 micro+calcif, thus 108 micro or calcif. 106 nodule, 20 nodule+ calcific, 11 nodule + micro

	\subsection{Image retrieval}
	\input{imageRetrieval}



	\section{Training}
	Details about the practical decsiions taken to archotectures, and hyperparamters per experiments.

	\subsection{Dataset}
	We have x number of images with x positives and negatives. Resunmied in Table...

	\subsection{Hardware}
	Training deep neural networks is computationally intensive and requires computers with powerful GPUs. We enlist here the resources available for this thesis.
	\begin{table}[h]
		\begin{tabular}{cp{4cm}p{1.7cm}p{2.0cm}cc}
		PC	& GPU	& HD	& CPU	& RAM	& \# \\
		\hline
		A4-401	& Nvidia Quadro K620 \newline 2GB 29 GB/s 128-bit \newline 384 cores	& 240 GB \newline (230 free)	& i5-4570 \newline  3.2GHz x 4	& 8 GB	& 27\\
		Mine	& Nvidia NVS 5400M \newline 2GB 29 GB/s 128-bit \newline 96 cores	& 57 GB \newline (36 free)	& i5-3210M \newline 2.5GHz x 4	& 4 GB	& 1 \\
		\hline
		\end{tabular}
		\caption{Available hardware for experiments}
	\end{table}

	\subsection{Architectures}
	using som eof the advice of section ... We tailored it down t two architectures: one for input 64 x64 and one for inpout 127 x 127. Both architectures are quite similar other than the first convolutiona layer. We present the architecture for 127.
	I choose that one. Maybe add one like this ((conv-> relu)*2 -> POOL)*3, try bigger input sizes (spatial resolution is not good)
127 and 64.
Itr uses only 3 x3 it is symmetric.
Depends on the ntry, after first layer everythin is similar.

	\subsection{Evaluation}
	We use this divisions, we divide per patient or per image (?)
We used x and x metric.

	Question: Should I test on all possible data augmentations and average the results or just on the simple ones?.	
	Questions: how to deal with corners of images when presenting results, maybe not that important. Try mean padding there or just leaving it there and presnt as black (for no prediction), or maybe present the mammogram without the corners and our rpedictions there too.

	Present the normal mammogram on the left and the output on the right.

	Does it matter to test with images from the same patient (for example if i shuffle the entire trainng set, or should i keep all images from a patient in the same part of the training/testing division)
% ROCKIT for ROC curves.

	\subsection{Software}
	Tools developed in Python mostly and used Caffe software (cite Berkelye Lab) for the actual trainig of the netwroks. 
	

	\part{Experiments}
	\section{Experiment 1: detection vs diagnosis masses or microcalcifications.}
%Choose what is this experiment: The network could be slided across an image. Options: (1) a network for detection of microcalcification and one for masses (and slide both across and plot their results with differerent colors) (2) a network for diagnosis of microcalc and one for masses(slide them both) and (3) one that detects micro+mass vs non-lession (stanford guys did bad with this one) and (4) one that detects any lession(micro+mass+other) vs no lession and (5) one that also detects more than one network but has multiple output. 

	Task selected. Architecture selected. Hyperparameters selected. results and discussion.
	\section{Experiment2: Detection of masses or something?}
	

	% Bibliography
	\bibliographystyle{plain}
	\bibliography{bibliography}
	
\end{document}
